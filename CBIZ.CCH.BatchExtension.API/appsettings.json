{
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "AzureKeyVaultAsConfigOptions": {
    "KeyVaultName": "kv-appdev-cchBatchExt"
  },
  "DatabaseOptions" : {
    "DWConnectionString": "",
    "LoggingConnection": "Server=dc5dsql01\\dev;Database=Logging;Trusted_Connection=True;TrustServerCertificate=True;"
  },  
  "ProcessOptions": {
    "StatusTimeIntervalSeconds" : 20,
    "StatusRetryLimit" : 5,
    "DownloadFilesDirectory" : "/tmp/data/DownLoadedFiles",
    "UseCchMockData": false,
    "GfrUploadRetryLimit" : 3,
    "AllowedGfrWorkFlows":[
      "TAX RETURN",
      "SUREPREP TAX RETURN",
      "EXTENSION"
    ]
  },
  "CchEndPointOptions": {
    "Domain": "http://DC5PCON02:5197",
    "GetCCHAuthorizationToken": "api/TaxReturns/GetCCHAuthorizationToken",
    "CreateBatchAPI": "api/TaxReturns/GetReturnsExportBatchPDF",    
    "GetBatchStatusAPI": "api/TaxReturns/GetBatchStatus",
    "GetBatchOutputFilesAPI": "api/TaxReturns/GetBatchOutputFiles",
    "BatchOutputDownloadFileAPI": "api/TaxReturns/BatchOutputDownloadFile"
  },
  "GfrApiAccessInfo": {
    "UserName": "",
    "Password": "",
    "ApiAppId":"",
    "DrawerId": ""
  },
  "GfrEndPointOptions": { 
    "TaxYear": "2025",
    "ServiceType": "CORE TAX",
    "Domain": "https://api.thomsonreuters.com", 
    "Auth": "gofileroom/api/v1/user/login",
    "CreateDocument": "gofileroom/api/v1/documents",
    "GetIndexes": "gofileroom/api/v1/drawers/{drawerID}/indexes",   
    "GetClientsByDrawerId": "gofileroom/api/v1/administration/{drawerId}/clients",
    "UploadDocument": "gofileroom/api/v1/documents/{documentID}/file",  
    "TrackingReportByDeliverable": "gofileroom/api/v2/firmflowreports/TrackingReportByDeliverable",
    "EditWorkFlow": "gofileroom/firmflow/api/V1/Workflow/EditWorkflow",
    "RouteWorkFlow" : "gofileroom/firmflow/api/V2/Route" 
  },
  "AllowedHosts": "*",
    "NLog": { 
    "internalLogFile": "${basedir}/logs/internal-nlog.txt",
    "internalLogLevel": "Warn",
    "autoReload": true,
    "autoShutdown": true,
    "extensions": [
      { "assembly": "Sentry.NLog" }
    ],
    "targets": {
      "logfile": {
        "type": "File",
        "fileName": "${basedir}/logs/logfile.txt",
        "layout": "-${longdate}|${level:uppercase=true}|${logger}|${message:withexception=true}",
        "maxArchiveFiles": 5,
        "archiveEvery": "Day",
        "archiveFileName": "${basedir}/logs/logfile.{###}.txt",
        "archiveNumbering": "Date"
      },
       "consoleLog": {
        "type": "Console",
        "layout": "-${longdate}|${level:uppercase=true}|${logger}|${message:withexception=true}"
      },
      "sentry": {
        "type": "Sentry",
        "dsn": "https://6f15f86e90f5548b03a1b72227b810a2@o582175.ingest.us.sentry.io/4508582088343552"
      },
      "LoggingDb": {
          "type": "Database",
          "dbProvider": "Microsoft.Data.SqlClient.SqlConnection, Microsoft.Data.SqlClient",
          "connectionString": "${configsetting:name=DatabaseOptions.LoggingConnection}",
          "commandText": "INSERT INTO [dbo].[BatchExtension] (Logged, Level, Logger, Message, Exception, UserName) VALUES (@Logged, @Level, @Logger, @Message, @Exception, @UserName)",
          "parameters": [
            {
              "name": "@Logged",
              "layout": "${longdate}"
            },
            {
              "name": "@Level",
              "layout": "${level:uppercase=true}"
            },
            {
              "name": "@Message",
              "layout": "${message}"
            },
            {
              "name": "@Logger",
              "layout": "${logger}"
            },
            {
              "name": "@Exception",
              "layout": "${exception:tostring}"
            },
            {
              "name": "@UserName",
              "layout": "${environment-user}"
            }
          ]
        }
    },
    "rules": [
      {
        "logger": "Microsoft.*",
        "maxlevel": "Info",
        "final": true 
      },
      {
        "logger": "*",
        "minLevel": "Warn",
        "writeTo": "logfile"
      },
      {
        "logger": "*",
        "minLevel": "Info",
        "writeTo": "consoleLog, LoggingDb"
      },
      {
        "logger": "*",
        "maxlevel": "Info",
        "writeTo": "sentry"
      }
    ]
  }
}
